{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./src/edit.js","webpack:///./src/editor.scss","webpack:///./src/index.js","webpack:///./src/save.js","webpack:///./src/toolbar.js","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"domReady\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"i18n\"]"],"names":["Edit","attributes","className","setAttributes","__","message","val","registerBlockType","apiVersion","title","description","category","icon","supports","html","edit","save","wp","i18n","Fragment","element","richText","toggleFormat","getTextContent","insert","registerFormatType","getActiveFormat","name","classes","kodigoCurrentPostId","kodigoModal","window","kodigoAnnotationsRegistry","items","field","postId","fields","defaults","type","removeItem","key","itemIndex","findIndex","value","index","splice","addItem","item","getItem","undefined","store","onSuccessCallback","url","ajaxurl","setDefaults","console","log","KodigoUtils","fetch","body","post_id","annotations","responseData","newItems","id","defaultIndex","loadItems","annotationsField","document","querySelector","trim","JSON","parse","getElementById","loadItemsAjax","data","cleanItems","clean","cleanTags","querySelectorAll","forEach","el","str","innerHtml","extractKey","parent","parentNode","replaceChild","getItems","isEmpty","hasOwnProperty","split","kodigoAnnotationFormControl","class","options","sizes","generateForm","content","generateTextField","fieldInfo","generateTextAreaField","generateWysiwygField","generateHiddenField","generateImageField","generateSelectField","generateLinkField","generateRepeaterItems","generateUniqueID","kodigoId","Math","random","toString","substring","handleConditional","form","setContent","annotation","jQuery","hide","tinyMCE","activeEditor","src","show","clearContent","elements","attr","handleConditionalType","toggleConditionalType","addEventListener","event","target","currentValue","style","display","loadWPEditor","oldEditor","initialize","tinymce","toolbar1","force_p_newlines","force_br_newlines","loadMediaLibraryButton","media","editor","on","e","preventDefault","css","imageWrapper","closest","send","attachment","props","imageSizes","get","medium","full","selectSize","createElement","size","optionSize","innerHTML","appendChild","open","generateEditAction","modal","okCallback","cancelCallback","kodigoAnnotation","getContent","modalId","find","kdata","modalInstance","getInstance","dialog","kodigoModalForm","kodigoIdField","setAttribute","KodigoModal","self","activeModal","create","openCallback","closeCallback","beforeCloseCallback","dialogClass","autoOpen","height","width","ui","modalForm","kodigoModalEditor","beforeClose","remove","close","buttons","text","click","isOpen","setOption","optionName","optionValue","setButtons","MyButton","kodigoMarkup","tagName","isActive","onChange","onToggle","select","getCurrentPostId","originalString","res","_wpLoadBlockEditor","then","s","wpColorPicker","domReady","Number","selectCore","checked","subscribe","isSavingPost","response","registerFormats","settings"],"mappings":";;;;;;;;;;;;;;;;QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;ACvJA,mCAAmC,mBAAO,CAAC,6GAAgC;;AAE3E;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0C;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+C;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA;AAEA;AACA;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","file":"index.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp_kodigo_block\"] = window[\"webpackJsonp_kodigo_block\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/index.js\",\"style-index\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","/**\n * Retrieves the translation of text.\n *\n * @see https://developer.wordpress.org/block-editor/packages/packages-i18n/\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * React hook that is used to mark the block wrapper element.\n * It provides all the necessary props like the class name.\n *\n * @see https://developer.wordpress.org/block-editor/packages/packages-block-editor/#useBlockProps\n */\nimport { useBlockProps } from '@wordpress/block-editor';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * Those files can contain any CSS code that gets applied to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './editor.scss';\n\n\n/** Practice */\nimport { TextControl } from '@wordpress/components';\n\n/**\n * The edit function describes the structure of your block in the context of the\n * editor. This represents what the editor will render when the block is used.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#edit\n *\n * @return {WPElement} Element to render.\n */\nexport default function Edit( { attributes, className, setAttributes } ) {\n\treturn (\n\t\t<div className={ className }>\n            <TextControl\n                label={ __( 'Message', 'kodigo-block' ) }\n                value={ attributes.message }\n                onChange={ ( val ) => setAttributes( { message: val } ) }\n            />\n        </div>\n\t);\n}\n","// extracted by mini-css-extract-plugin","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/#registering-a-block\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Retrieves the translation of text.\n *\n * @see https://developer.wordpress.org/block-editor/packages/packages-i18n/\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\nimport './toolbar.js';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport save from './save';\n\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/#registering-a-block\n */\nregisterBlockType( 'create-block/kodigo-block', {\n\t/**\n\t * @see https://make.wordpress.org/core/2020/11/18/block-api-version-2/\n\t */\n\tapiVersion: 2,\n\n\t/**\n\t * This is the display title for your block, which can be translated with `i18n` functions.\n\t * The block inserter will show this name.\n\t */\n\ttitle: __( 'Kodigo Block', 'kodigo-block' ),\n\n\t/**\n\t * This is a short description for your block, can be translated with `i18n` functions.\n\t * It will be shown in the Block Tab in the Settings Sidebar.\n\t */\n\tdescription: __(\n\t\t'Example block written with ESNext standard and JSX support – build step required.',\n\t\t'kodigo-block'\n\t),\n\n\t/**\n\t * Blocks are grouped into categories to help users browse and discover them.\n\t * The categories provided by core are `common`, `embed`, `formatting`, `layout` and `widgets`.\n\t */\n\tcategory: 'widgets',\n\n\t/**\n\t * An icon property should be specified to make it easier to identify a block.\n\t * These can be any of WordPress’ Dashicons, or a custom svg element.\n\t */\n\ticon: 'smiley',\n\n\t/**\n\t * Optional block extended support features.\n\t */\n\tsupports: {\n\t\t// Removes support for an HTML mode.\n\t\thtml: false,\n\t},\n\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n\n\t/**\n\t * @see ./save.js\n\t */\n\tsave,\n} );\n","/**\n * Retrieves the translation of text.\n *\n * @see https://developer.wordpress.org/block-editor/packages/packages-i18n/\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * React hook that is used to mark the block wrapper element.\n * It provides all the necessary props like the class name.\n *\n * @see https://developer.wordpress.org/block-editor/packages/packages-block-editor/#useBlockProps\n */\nimport { useBlockProps } from '@wordpress/block-editor'; \n\n/**\n * The save function defines the way in which the different attributes should\n * be combined into the final markup, which is then serialized by the block\n * editor into `post_content`.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#save\n *\n * @return {WPElement} Element to render.\n */\nexport default function save( { attributes, className } ) {\n\treturn <div className={ className }>{ attributes.message }</div>;\n}\n ","/**\n * WordPress dependencies\n */\n\nimport { RichTextToolbarButton, RichTextShortcut } from '@wordpress/block-editor';\nimport domReady from '@wordpress/dom-ready';\nimport { select, subscribe } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\n \nconst { __ } = wp.i18n; \nconst { Fragment } = wp.element;\nconst { toggleFormat, getTextContent, insert } = wp.richText;\nconst { registerFormatType, getActiveFormat } = wp.richText;\n\n\n/**\n * Block constants\n */\nconst name = 'kodigo-block/markup';\nconst classes = 'tooltip--object kodigo-markup';\nvar kodigoCurrentPostId = null;\n\nlet kodigoModal = null;\n\nwindow.kodigoAnnotationsRegistry = {\n    \n\titems: {},\n    field: '#kodigo-annotations-list',\n\tpostId: null,\n\n\tfields: ['content', 'img', 'type', 'name'],\n\t\n\tdefaults: {\n\t\ttype: 'definition',\n\t},\n    \n    removeItem: function( key ) {\n        let itemIndex = this.items.findIndex( ( value, index ) => {\n            return value.key === key;\n        } );\n\n        this.items.splice( itemIndex, 1 );\n    },\n\n    addItem: function( key, item ) {\n\t\t\n        this.items[key] = item;\n\n    },\n\n\tgetItem: function( key ) {\n\t\treturn ( this.items[key] != undefined )? this.items[key] : false;\n\t},\n\n    store: function( onSuccessCallback = null ) {\n\n\t\tlet postId = this.postId;\n\t\tlet items = this.items;\n\t\tlet url = ajaxurl + '?action=store_kodigo_annotations';\n\t\t\n\t\titems = this.items = this.setDefaults( items );\n\t\tconsole.log(items);\n\t\t//do ajax fetch\n\t\tKodigoUtils.fetch( {\n\t\t\tbody: {\n\t\t\t\tpost_id: postId,\n\t\t\t\tannotations: {\n\t\t\t\t\titems\n\t\t\t\t}\n\t\t\t}\n\t\t}, url, ( responseData ) => {\n\t\t\t\t\n\t\t\tif ( onSuccessCallback != null && typeof onSuccessCallback == 'function' ) {\n\t\t\t\tonSuccessCallback( responseData );\n\t\t\t} \n\t\t} );\n\t},\n\n\tsetDefaults: function( items ) {\n\n\t\tlet newItems = {};\n\n\t\tfor ( let id in items ) {\n\t\t\t\n\t\t\tif ( items[id] != undefined ) {\n\t\t\t\t\n\t\t\t\tnewItems[id] = items[id];\n\t\t\t\t\n\t\t\t\tfor ( let defaultIndex in this.defaults ) {\n\t\t\t\t\tif ( items[id][defaultIndex] == undefined ) {\n\t\t\t\t\t\tnewItems[id][defaultIndex] = this.defaults[defaultIndex];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn newItems;\n\n\t},\n\n    loadItems: function() {\n\n\t\tthis.items = {};\t\n\t\tlet annotationsField = document.querySelector( this.field ).value;\n\t\tannotationsField.trim();\n\n\t\tif ( annotationsField != '' )\n\t\t\tthis.items = JSON.parse( document.querySelector( this.field ).value );\n\n\t\tfor ( let index in this.items ) {\n\t\t\tdocument.getElementById( 'kodigo-' + index );\n\t\t}\n    },\n\n\tloadItemsAjax: function ( onSuccessCallback = null ) {\n\t\t\n\t\tlet postId = this.postId;\n\t\tlet items = this.items; \n\t\tlet url = ajaxurl + '?action=fetch_kodigo_annotations';\n\n\t\tconsole.log('loading');\n\n\t\tKodigoUtils.fetch( {\n\t\t\tbody: {\n\t\t\t\tpost_id: postId\n\t\t\t}\n\t\t}, url, ( responseData ) => {\n\n\t\t\tif ( responseData.data !== undefined && responseData.data.items !== undefined ) {\n\t\t\t\tthis.items = responseData.data.items;\n\t\t\t\t\n\t\t\t\t//this.cleanTags();\n\t\t\t\tthis.cleanItems();\n\n\t\t\t\tthis.items = this.setDefaults( responseData.data.items );\n\t\t\t}\n\n\t\t\tif ( onSuccessCallback != null && typeof onSuccessCallback == 'function' ) {\n\t\t\t\tonSuccessCallback( responseData );\n\t\t\t}\n\t\t} );\n\t},\n\tclean: function() {},\n\tcleanTags: function() {\n\n\t\tdocument.querySelectorAll( '.kodigo-markup' ).forEach( ( el, index ) => {\n\t\t\t\n\t\t\tlet str = el.innerHtml;\n\t\t\tlet id = el.id;\n\t\t\tid = this.extractKey( id );\n\t\t\t//check if id has corresponding record in the registry\n\t\t\t//delete if it does not have\n\t\t\tif ( this.getItem( id ) == false ) {\n\t\t\t\tlet parent = el.parentNode;\n\t\t\t\tparent.replaceChild( str, el );\n\t\t\t}\n\n\t\t} );\n\n\t},\n\n\tcleanItems: function() {\n\t\t\n\t\tfor ( let itemIndex in this.items ) {\n\t\t\t\n\t\t\tif ( document.querySelector( '#kodigo-' + itemIndex ) === null ) {\n\t\t\t\tdelete this.items[itemIndex];\n\t\t\t}\n\t\t}\n\t},\n\n\tgetItems: function() {\n\n\t\tif ( this.isEmpty() ) {\n\t\t\tthis.loadItems();\n\t\t}\n\t\treturn this.items;\n\t\n\t},\n\n\tisEmpty: function() { \n\n\t\tfor( let key in this.items ) {\n\n\t\t\tif( this.items.hasOwnProperty( key ) )\n\t\t\t\treturn false;\n\t\t\n\t\t}\n\t\t\n\t\treturn true;\n\t},\n\n\textractKey: ( id ) => {\n        let str = id.split('-');\n        return ( str[1] !== undefined )? str[1] : false;\n    }\n\n};\n\nconst kodigoAnnotationFormControl = {\n\n\tfields: [\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'select',\n\t\t\tname: 'kodigo_type',\n\t\t\tvalue: 'definition',\n\t\t\tclass: '',\n\t\t\toptions: [\n\t\t\t\t'definition',\n\t\t\t\t'profile',\n\t\t\t\t'link'\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'text',\n\t\t\tname: 'kodigo_profile_name',\n\t\t\tvalue: '',\n\t\t\tclass: '',\n\t\t},\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'img',\n\t\t\tname: 'kodigo_image_url',\n\t\t\tvalue: '',\n\t\t\tclass: '',\n\t\t\tsizes: ''\n\t\t},\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'wysiwyg',\n\t\t\tname: 'kodigo_content',\n\t\t\tvalue: '',\n\t\t\tclass: '',\n\t\t},\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'tiny',\n\t\t\tname: 'kodigo_content',\n\t\t\tvalue: '',\n\t\t\tclass: '',\n\t\t},\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'hidden',\n\t\t\tname: 'kodigo_annotation_id',\n\t\t\tvalue: '',\n\t\t\tclass: '',\n\t\t},\n\t\t{\n\t\t\tid: null,\n\t\t\ttype: 'repeater',\n\t\t\tname: 'kodigo_related_links',\n\t\t\tfields: [\n\n\t\t\t],\n\t\t},\n\t\t\n\t],\n\n\tgenerateForm: ( content ) => {},\n\tgenerateTextField: ( fieldInfo ) => {},\n\tgenerateTextAreaField: ( fieldInfo ) => {},\n\tgenerateWysiwygField: ( fieldInfo ) => {},\n\tgenerateHiddenField: ( fieldInfo ) => {},\n\tgenerateImageField: ( fieldInfo ) => {},\n\tgenerateSelectField: ( fieldInfo ) => {},\n\tgenerateLinkField: ( fieldInfo ) => {},\n\tgenerateRepeaterItems: ( fieldInfo ) => {},\n\n\tgenerateUniqueID: () => {\n\t\tlet kodigoId = Math.random().toString(36).substring(2, 15);\n\t\tkodigoId = kodigoId + Math.random().toString(36).substring(2, 15);\n\t\treturn kodigoId;\n\t},\n\t\n\thandleConditional: ( form ) => {\n\t},\n\n\tsetContent: ( annotation ) => {\n\n\t\tjQuery('#kodigo-image-clear').hide();\n\n\t\tfor( let index in annotation ) {\n\n\t\t\tif ( document.querySelector( '#kodigo-' + index  ) != null )\n\t\t\t\tdocument.querySelector( '#kodigo-' + index  ).value = annotation[index];\n\t\t\t\n\t\t\tif ( index == 'content' && tinyMCE.activeEditor.id == 'kodigo-content' ) {\n\t\t\t\ttinyMCE.activeEditor.setContent( annotation[index] );\n\t\t\t}\n\n\t\t\tif ( index == 'img' && ( annotation[index] != undefined ) && annotation[index] !== '' ) {\n\t\t\t\tdocument.querySelector('#kodigo-image').src = annotation[index];\n\t\t\t\tdocument.querySelector('#kodigo-image-url').src = annotation[index];\n\n\t\t\t\tif ( annotation[index] ) {\n\t\t\t\t\tjQuery('#kodigo-image-clear').show();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tclearContent: ( form ) => {\n\t\t\n\t\tlet elements = form.querySelectorAll( '.kodigo-form-control' );\n\n\t\telements.forEach( ( el, index ) => {\n\n\t\t\tel.value = '';\n\n\t\t} );\n\n\t\tjQuery( '#kodigo-image-url' ).val( '' );\n\t\tjQuery( '#kodigo-image-url' ).data( 'sizes', '' );\n\t\tjQuery( '#kodigo-image' ).attr( 'src', '' );\n\t},\n\thandleConditionalType: function ( form ) {\n\n\t\tlet value = form.querySelector( '.kodigo-type' ).value;\n\t\t\n\t\tthis.toggleConditionalType( form, value );\n\n\t\tform.querySelector( '.kodigo-type' ).addEventListener( 'change', event => {\n\t\t\tlet value = event.target.value;\n\t\t\tthis.toggleConditionalType( form, value );\n\t\t} );\n\t},\n\n\ttoggleConditionalType: ( form, currentValue ) => {\n\n\t\tform.querySelectorAll( '.kodigo-type--conditional' ).forEach( ( el, index ) => {\n\t\t\tel.style.display = 'none';\n\t\t} );\n\t\t\n\t\tform.querySelectorAll( '.kodigo-type--' + currentValue ).forEach( ( el, index ) => {\n\t\t\tel.style.display = 'block';\n\t\t} );\n\n\t},\n\n\tloadWPEditor: ( id ) => {\n\t\treturn wp.oldEditor.initialize( id, {\n\t\t\ttinymce: {\n\t\t\t\ttoolbar1:\"bold,italic,underline,bullist,\",\n\t\t\t\tforce_p_newlines : false,\n\t\t\t\tforce_br_newlines : false,\n\t\t\t},\n\t\t} );\n\t},\n\n\tloadMediaLibraryButton: () => {\n\t\tif ( typeof wp !== 'undefined' && wp.media && wp.media.editor) {\n\n\t\t\tjQuery( '#kodigo-image-clear' ).on( 'click', function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tjQuery( '#kodigo-image-url' ).val( '' );\n\t\t\t\tjQuery( '#kodigo-image' ).attr( 'src', '' );\n\t\t\t\tjQuery( '#kodigo-image-clear' ).css( 'display', 'none' );\n\t\t\t} );\n\n            jQuery( '#kodigo-media-library' ).on( 'click', function(e) {\n\n                e.preventDefault();\n\n                let imageWrapper = e.target.closest( '.kodigo-form-wrapper' ).querySelector('.kodigo-image--wrapper');\n\t\t\t\tconsole.log(imageWrapper);\n                wp.media.editor.send.attachment = function(props, attachment) {\n\n\t\t\t\t\tlet imageSizes = wp.media.attachment( attachment.id ).get( 'sizes' );\n\t\t\t\t\tconsole.log(imageSizes);\n\t\t\t\t\tlet url = ( imageSizes.medium )? imageSizes.medium['url'] : imageSizes.full['url'];\n\n\t\t\t\t\tjQuery( '#kodigo-image-url' ).val( url );\n\t\t\t\t\tjQuery( '#kodigo-image' ).attr( 'src', url );\n\t\t\t\t\tjQuery( '#kodigo-image' ).data( 'sizes', imageSizes );\n\t\t\t\t\tjQuery( '#kodigo-image-clear' ).css('display', 'block');\n\n\t\t\t\t\tlet selectSize = document.createElement( 'select' );\n\t\t\t\t\tselectSize.id = 'kodigo-image-sizes';\n\t\t\t\t\t\n\t\t\t\t\tfor ( let size in imageSizes ) {\n\t\t\t\t\t\tlet optionSize = document.createElement( 'option' );\n\t\t\t\t\t\toptionSize.value = imageSizes[size];\n\t\t\t\t\t\toptionSize.innerHTML = size;\n\t\t\t\t\t\tselectSize.appendChild( optionSize );\n\t\t\t\t\t}\n\n\t\t\t\t\t//imageWrapper.appendChild( selectSize );\n\n\t\t\t\t};\n\n                wp.media.editor.open(this);\n                return false;\n            } );\n        }\n\t},\n\n\tgenerateEditAction: ( id, modal, okCallback = null, cancelCallback = null ) => {\n\n\t\tdocument.querySelector( '#' + 'kodigo-' + id ).addEventListener( 'click', event => {\n\t\t\t\n\t\t\tmodal.open( () => {\n\n\t\t\t\tlet kodigoAnnotation = kodigoAnnotationsRegistry.getItem( id );\n\n\t\t\t\tkodigoAnnotation['content'] = wp.oldEditor.getContent( 'kodigo-content' );\n\t\t\t\tkodigoAnnotation['type'] = jQuery( modal.modalId ).find( '#kodigo-type' ).val();\n\t\t\t\tkodigoAnnotation['img'] = jQuery( modal.modalId ).find( '#kodigo-image-url' ).val();\n\t\t\t\tkodigoAnnotation['img_sizes'] = jQuery( modal.modalId ).find( '#kodigo-image-url' ).data('sizes');\n\n\t\t\t\tkodigoAnnotationsRegistry.addItem( id, kodigoAnnotation );\n\n\t\t\t\tif ( okCallback != undefined && typeof okCallback === 'function' ) {\n\t\t\t\t\tokCallback();\n\t\t\t\t}\n\n\t\t\t}, () => {\n\n\t\t\t\tif ( cancelCallback != undefined && typeof cancelCallback === 'function' ) {\n\t\t\t\t\tcancelCallback();\n\t\t\t\t}\n\n\t\t\t}, () => {\n\t\t\t\t\n\t\t\t\t//open callback\n\t\t\t\tlet kdata = kodigoAnnotationsRegistry.getItem( id );\n\t\t\t\t\n\t\t\t\tkodigoAnnotationFormControl.setContent( kdata );\n\n\t\t\t\tlet modalInstance = modal.getInstance();\n\t\t\t\tjQuery( modal.modalId ).dialog( 'option', 'title', 'Kodigo' );\n\n\t\t\t\t\n\t\t\t\tlet kodigoModalForm = modalInstance.element.find( '.kodigo-form' );\n\t\t\t\tlet kodigoIdField = document.querySelector( '#kodigo-annotation-id' );\n\t\t\t\t\n\t\t\t\t//create extrafield for kodigo id here\n\t\t\t\t//if field does not exist\n\t\t\t\tif ( kodigoIdField == null ) {\n\t\t\t\t\tkodigoIdField = document.createElement( 'input' );\n\t\t\t\t\tkodigoIdField.setAttribute( 'type', 'hidden' );\n\t\t\t\t\tkodigoIdField.setAttribute( 'id', 'kodigo-annotation-id' );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tkodigoIdField.value = id;\n\n\t\t\t\tkodigoModalForm.get().forEach( ( el, index ) => {\n\t\t\t\t\tel.appendChild(kodigoIdField);\n\t\t\t\t} );\n\n\t\t\t}, () => {\n\t\t\t\t\n\t\t\t\tif ( jQuery( modal.modalId ).dialog( 'instance' ) ) {\n\t\t\t\t\tjQuery( modal.modalId ).dialog( 'destroy' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t//modal.open();\n\n\n\t\t} );\n\n\t},\n};\n\nvar KodigoModal = function() {\n\t\n\tlet self = this;\n\tthis.modalId = '#kodigo-editor-modal';\n\n\tthis.getInstance = function (){\n\t\t\n\t\tlet activeModal = jQuery( self.modalId ).dialog( 'instance' );\n\t\treturn activeModal;\n\n\t};\n\n\tthis.create = function( okCallback = null, cancelCallback = null, openCallback = null, closeCallback = null, beforeCloseCallback = null ) {\n\t\t\n\t\tjQuery( self.modalId ).dialog( {\n\t\t\tdialogClass: \"no-close\",\n\t\t\tautoOpen: false,\n\t\t\theight: 500,\n\t\t\twidth: 500,\n\t\t\tclasses: {\n\t\t\t\t\"ui-dialog\": \"kodigo__ui-dialog\"\n\t\t\t},\n\t\t\topen: function( event, ui ) {\n\t\t\t\tlet modalForm = document.querySelector( '#kodigo-editor-modal' );\n\t\t\t\tlet kodigoModalEditor = kodigoAnnotationFormControl.loadWPEditor( 'kodigo-content' );\n\t\t\t\t\n\t\t\t\tkodigoAnnotationFormControl.loadMediaLibraryButton();\n\t\t\t\tkodigoAnnotationFormControl.handleConditionalType( modalForm );\n\n\t\t\t\tif ( openCallback != null && typeof openCallback == 'function' ) {\n\t\t\t\t\topenCallback();\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tbeforeClose: function( event, ui ) {\n\t\t\t\t//remove active editor\n\t\t\t\twp.oldEditor.remove('kodigo-content');\n\t\t\t\tlet form = document.querySelector( '#kodigo-editor-modal' );\n\t\t\t\tkodigoAnnotationFormControl.clearContent( form );\n\n\t\t\t\tif ( beforeCloseCallback != null && typeof beforeCloseCallback == 'function' ) {\n\t\t\t\t\tbeforeCloseCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: function ( event, ui ) {\n\t\t\t\tif ( closeCallback != null && typeof closeCallback == 'function' ) {\n\t\t\t\t\tcloseCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Cancel\",\n\t\t\t\t\tclass: ' components-button is-tertiary',\n\t\t\t\t\tclick: function( e ) {\n\n\t\t\t\t\t\tif ( cancelCallback != null && typeof cancelCallback == 'function' ) {\n\t\t\t\t\t\t\tcancelCallback();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tjQuery( this ).dialog( \"close\" );\n\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\ttext: \"OK\",\n\t\t\t\tclass: this.class + ' components-button is-primary',\n\t\t\t\tclick: function( e ) {\n\n\t\t\t\t\t\tif ( okCallback != null && typeof okCallback == 'function' ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tokCallback();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tjQuery( self.modalId ).dialog( 'close' );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tthis.open = function( okCallback = null, cancelCallback = null, openCallback = null, closeCallback = null, beforeCloseCallback = null ){\n\t\t\n\t\tlet activeModal = jQuery( self.modalId ).dialog( 'instance' );\n\t\tlet isOpen = false;\n\t\t\n\t\tif ( activeModal != undefined ) {\n\t\t\tisOpen = jQuery( self.modalId ).dialog( 'isOpen' );\n\t\t\tself.close(); \n\t\t} \n\t\t\n\t\tself.create( okCallback, cancelCallback, openCallback, closeCallback, beforeCloseCallback );\n\t\t//self.create( okCallback, cancelCallback, openCallback, closeCallback, beforeCloseCallback );\n\t\t\n\t\tif ( !isOpen ) {\n\t\t\tjQuery( self.modalId ).dialog( 'open' );\n\t\t}\n\t};\n\n\tthis.edit = function( okCallback = null, cancelCallback = null, openCallback = null, closeCallback = null, beforeCloseCallback = null ){\n\t\t\t\n\t\tself.create( okCallback, cancelCallback, openCallback, closeCallback, beforeCloseCallback );\n\t\tjQuery( self.modalId ).dialog( 'open' );\n\t\n\t};\n\n\tthis.close = function(){\n\t\tlet activeModal = jQuery( self.modalId ).dialog( 'instance' );\n\n\t\tif ( activeModal != undefined ) {\n\n\t\t\tjQuery( self.modalId ).dialog( 'close' );\n\t\t\tjQuery( self.modalId ).dialog( 'destroy' );\n\n\t\t}\n\t}\n\n\tthis.setOption = function( optionName, optionValue ){\n\n\t}\n\n\tthis.setButtons = function(){}\n\n\treturn this;\n}\n\n/**\n * \n *  Components\n */\n\n/**\n * Gutenberg Kodigo Markup controls\n */\n\nconst MyButton = () => <Button isPrimary>Click me!</Button>;\nexport const kodigoMarkup = {\n\tname,\n\ttitle: __( 'Kodigo' ),\n\ttagName: 'span',\n\tclassName: 'kodigo-markup',\n\tattributes: {\n\t\tstyle: 'style',\n\t},\n\tedit( props ) {\n\n\t\tlet value = props.value;\n\t\tlet isActive = props.isActive;\n\t\tlet onChange = props.onChange;\n\n\t\tconst onToggle = () => {\n\n\t\t\t//generate random ID\n\t\t\tlet kodigoId = kodigoAnnotationFormControl.generateUniqueID();\n\t\t\tlet postId = select('core/editor').getCurrentPostId();\n\n\t\t\tif ( isActive ) {\n\t\t\t\tonChange(\n\t\t\t\t\ttoggleFormat( value, {\n\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\tid: 'kodigo-' + kodigoId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclassName: { classes }\n\t\t\t\t\t} ) \n                );\n\n                /*kodigoAnnotationsRegistry.removeItem( formValues );\n                kodigoAnnotationsRegistry.store();*/\n\t\t\t} else {\n\n\t\t\t\t//call modal here\n\t\t\t\t//attach okCallback\n\t\t\t\tkodigoModal.open( () => {\n\t\n\t\t\t\t\tonChange(\n\t\t\t\t\t\ttoggleFormat( value, {\n\t\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tid: 'kodigo-' + kodigoId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclassName: { classes }\n\t\t\t\t\t\t} ) \n\t\t\t\t\t);\n\n\t\t\t\t\t//fetch original string\n\t\t\t\t\tlet originalString = jQuery( '#kodigo-'+kodigoId ).html();\n\n\t\t\t\t\t//extract form values\n\t\t\t\t\tlet kodigoAnnotation = {\n\t\t\t\t\t\t\"content\": wp.oldEditor.getContent('kodigo-content'),\n\t\t\t\t\t\t\"type\": jQuery( kodigoModal.modalId ).find('#kodigo-type').val(),\n\t\t\t\t\t\t\"img\": jQuery( kodigoModal.modalId ).find( '#kodigo-image-url' ).val(),\n\t\t\t\t\t\t\"img_sizes\": jQuery( kodigoModal.modalId ).find( '#kodigo-image-url' ).data( 'sizes' ),\n\t\t\t\t\t\t\"str\": originalString,\n\t\t\t\t\t\t\"richtext\": value\n\t\t\t\t\t};\n\n\t\t\t\t\t//store annotations to registry\n\t\t\t\t\tkodigoAnnotationsRegistry.addItem( kodigoId, kodigoAnnotation );\n\t\t\t\t\t\n\t\t\t\t\t//attach edit action to newly added annotation\n\t\t\t\t\tkodigoAnnotationFormControl.generateEditAction( kodigoId, kodigoModal );\n\t\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<RichTextShortcut\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tcharacter=\"k\"\n\t\t\t\t\tonUse={ onToggle }\n\t\t\t\t/>\n\t\t\t\t<RichTextToolbarButton\n\t\t\t\t\ticon=\"edit-page\"\n\t\t\t\t\ttitle={ __( ' Kodigo' ) }\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\tshortcutType=\"primary\"\n\t\t\t\t\tshortcutCharacter=\"k\"\n\t\t\t\t/>\n\t\t\t</Fragment>\n\t\t);\n\n\t},\n};\n\njQuery( function(){\n\t\n\t//kodigoAnnotationsRegistry.loadItems();\n\tlet postId = select('core/editor').getCurrentPostId();\n\t\n\tkodigoModal = new KodigoModal();\n\n\tkodigoAnnotationsRegistry.loadItemsAjax( ( res ) => {\n\t\t\n\t\tif ( 'data' in res && 'items' in res.data ) {\n\n\t\t\tlet annotations = res.data?.items;\n\t\t\tfor ( let kodigoId in annotations ) {\n\t\n\t\t\t\t//attach edit action to newly added annotation\n\t\t\t\tkodigoAnnotationFormControl.generateEditAction( kodigoId, kodigoModal );\n\t\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\twindow._wpLoadBlockEditor.then( function( s ) {\n\n\t} );\n\n\tjQuery( '.kodigo-color-field' ).wpColorPicker();\n\n} );\n\ndomReady( function() {\n\tkodigoAnnotationsRegistry.postId = Number( document.querySelector( '#kodigo-post-id' ).value );\n\t//kodigoModal.create();\n} );\n\nvar selectCore = select('core/editor');\nvar checked = true; // Start in a checked state.\n\n//kodigo block subscribe event\nsubscribe( () => {\n    if ( selectCore.isSavingPost() ) {\n\t\t checked = false;\n    } else {\n \t\tif ( ! checked ) {\n\n\t\t\tlet postId = select('core/editor').getCurrentPostId();\n\n\t\t\tkodigoAnnotationsRegistry.store( ( response ) => {\n\t\t\t\tconsole.log('storing...');\n\t\t\t} );\n\n            checked = true;\n\t\t\t\n\t\t}\n\n    }\n} );\n\nfunction registerFormats () {\n\t[\n\t\tkodigoMarkup,\n\t].forEach( ( { name, ...settings } ) => registerFormatType( name, settings ) );\n};\n\nregisterFormats();","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"domReady\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());"],"sourceRoot":""}